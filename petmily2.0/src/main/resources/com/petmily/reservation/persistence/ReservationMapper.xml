<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.petmily.reservation.persistence.ReservationMapper">

	<insert id='insertReservation' parameterType="com.petmily.reservation.domain.ReservationVO">
		insert into reservation_tb values (RESERVATION_SEQ.nextval, #{reservationMemberId}, #{reservationPetNO}, #{reservationDate}, '예약신청', #{reservationKind}, #{reservationSymptom}, #{reservationPeriod}, #{reservationInoculationType}, #{reservationHospitalId})
	</insert>

	<select id="reservationList" resultType="com.petmily.reservation.domain.ReservationVO">
		select * from reservation_tb where reservation_member_id = #{memId} ORDER BY reservation_no DESC
	</select>

	<delete id="reservationFail">
		delete from reservation_tb where reservation_no = #{reservationNo}
	</delete>

	<update id="reservationMedSuccess">
		update reservation_tb set reservation_status = '진료완료' where reservation_no = #{reservationNo}
	</update>

	<select id="reservationMedInfo" resultType="com.petmily.hospital.domain.HospitalMedRecordsVO">
		select * from HOSPT_MED_RECORDS_TB Where RESERVATION_NO=#{reservationNo}
	</select>

	<select id="checkMedInfo" resultType="com.petmily.hospital.domain.HospitalMedRecordsVO">
		select * from HOSPT_MED_RECORDS_TB where RESERVATION_NO = #{reservationNo}
	</select>

</mapper>
